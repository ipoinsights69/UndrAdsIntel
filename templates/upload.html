{% extends "layout.html" %}
{% block title %}Upload Package Names{% endblock %}
{% block content %}
<div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-800 mb-4">Upload Package Names</h1>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="card">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Upload CSV File</h2>
            <form action="/upload" method="post" enctype="multipart/form-data" class="space-y-4">
                <div>
                    <label for="csv_file" class="block text-sm font-medium text-gray-700 mb-1">CSV File</label>
                    <input type="file" name="csv_file" id="csv_file" accept=".csv" class="w-full border border-gray-300 rounded-lg p-2 focus:ring-primary-500 focus:border-primary-500">
                    <p class="mt-1 text-sm text-gray-500">CSV file should have package names in the first column</p>
                </div>
                
                <!-- Country Selection -->
                <div>
                    <label for="country_csv" class="block text-sm font-medium text-gray-700 mb-1">Country</label>
                    <select name="country" id="country_csv" class="w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring focus:ring-primary-500 focus:ring-opacity-50 transition-colors duration-200">
                        <option value="">Select Country</option>
                        <option value="US">United States</option>
                        <option value="GB">United Kingdom</option>
                        <option value="CA">Canada</option>
                        <option value="AU">Australia</option>
                        <option value="IN">India</option>
                        <option value="DE">Germany</option>
                        <option value="FR">France</option>
                        <option value="JP">Japan</option>
                        <option value="BR">Brazil</option>
                        <option value="RU">Russia</option>
                        <option value="CN">China</option>
                        <option value="KR">South Korea</option>
                        <option value="IT">Italy</option>
                        <option value="ES">Spain</option>
                        <option value="MX">Mexico</option>
                    </select>
                </div>
                
                <!-- Category Selection -->
                <div>
                    <label for="category_csv" class="block text-sm font-medium text-gray-700 mb-1">Category</label>
                    <select name="category" id="category_csv" class="w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring focus:ring-primary-500 focus:ring-opacity-50 transition-colors duration-200">
                        <option value="">Select Category</option>
                        <option value="GAME">Games</option>
                        <option value="SOCIAL">Social</option>
                        <option value="COMMUNICATION">Communication</option>
                        <option value="PRODUCTIVITY">Productivity</option>
                        <option value="TOOLS">Tools</option>
                        <option value="ENTERTAINMENT">Entertainment</option>
                        <option value="EDUCATION">Education</option>
                        <option value="FINANCE">Finance</option>
                        <option value="SHOPPING">Shopping</option>
                        <option value="TRAVEL_AND_LOCAL">Travel & Local</option>
                        <option value="HEALTH_AND_FITNESS">Health & Fitness</option>
                        <option value="PHOTOGRAPHY">Photography</option>
                        <option value="MUSIC_AND_AUDIO">Music & Audio</option>
                        <option value="VIDEO_PLAYERS">Video Players</option>
                        <option value="MAPS_AND_NAVIGATION">Maps & Navigation</option>
                        <option value="NEWS_AND_MAGAZINES">News & Magazines</option>
                        <option value="BOOKS_AND_REFERENCE">Books & Reference</option>
                        <option value="FOOD_AND_DRINK">Food & Drink</option>
                        <option value="WEATHER">Weather</option>
                        <option value="BUSINESS">Business</option>
                    </select>
                </div>
                
                <button type="submit" class="btn-primary w-full flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                    </svg>
                    Upload and Start Scraping
                </button>
            </form>
        </div>
        
        <div class="card">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Enter Package Names Manually</h2>
            <form action="/upload" method="post" class="space-y-4">
                <div>
                    <label for="package_names" class="block text-sm font-medium text-gray-700 mb-1">Package Names</label>
                    <textarea class="w-full border border-gray-300 rounded-lg p-2 focus:ring-primary-500 focus:border-primary-500" id="package_names" name="package_names" rows="5" placeholder="Enter one package name per line"></textarea>
                    <p class="mt-1 text-sm text-gray-500">Example: com.facebook.katana</p>
                </div>
                
                <!-- Country Selection -->
                <div>
                    <label for="country_manual" class="block text-sm font-medium text-gray-700 mb-1">Country</label>
                    <select name="country" id="country_manual" class="w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring focus:ring-primary-500 focus:ring-opacity-50 transition-colors duration-200">
                        <option value="">Select Country</option>
                        <option value="US">United States</option>
                        <option value="GB">United Kingdom</option>
                        <option value="CA">Canada</option>
                        <option value="AU">Australia</option>
                        <option value="IN">India</option>
                        <option value="DE">Germany</option>
                        <option value="FR">France</option>
                        <option value="JP">Japan</option>
                        <option value="BR">Brazil</option>
                        <option value="RU">Russia</option>
                        <option value="CN">China</option>
                        <option value="KR">South Korea</option>
                        <option value="IT">Italy</option>
                        <option value="ES">Spain</option>
                        <option value="MX">Mexico</option>
                    </select>
                </div>
                
                <!-- Category Selection -->
                <div>
                    <label for="category_manual" class="block text-sm font-medium text-gray-700 mb-1">Category</label>
                    <select name="category" id="category_manual" class="w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring focus:ring-primary-500 focus:ring-opacity-50 transition-colors duration-200">
                        <option value="">Select Category</option>
                        <option value="GAME">Games</option>
                        <option value="SOCIAL">Social</option>
                        <option value="COMMUNICATION">Communication</option>
                        <option value="PRODUCTIVITY">Productivity</option>
                        <option value="TOOLS">Tools</option>
                        <option value="ENTERTAINMENT">Entertainment</option>
                        <option value="EDUCATION">Education</option>
                        <option value="FINANCE">Finance</option>
                        <option value="SHOPPING">Shopping</option>
                        <option value="TRAVEL_AND_LOCAL">Travel & Local</option>
                        <option value="HEALTH_AND_FITNESS">Health & Fitness</option>
                        <option value="PHOTOGRAPHY">Photography</option>
                        <option value="MUSIC_AND_AUDIO">Music & Audio</option>
                        <option value="VIDEO_PLAYERS">Video Players</option>
                        <option value="MAPS_AND_NAVIGATION">Maps & Navigation</option>
                        <option value="NEWS_AND_MAGAZINES">News & Magazines</option>
                        <option value="BOOKS_AND_REFERENCE">Books & Reference</option>
                        <option value="FOOD_AND_DRINK">Food & Drink</option>
                        <option value="WEATHER">Weather</option>
                        <option value="BUSINESS">Business</option>
                    </select>
                </div>
                
                <button type="submit" class="btn-primary w-full flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                    Start Scraping
                </button>
            </form>
        </div>
    </div>
    
    <div class="mt-6">
        <a href="/logs" class="btn-secondary inline-flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
            </svg>
            Back to Logs
        </a>
    </div>
</div>

<script>
    document.getElementById('file').addEventListener('change', function() {
        const fileName = this.files[0]?.name;
        const fileLabel = document.getElementById('file-label');
        
        if (fileName) {
            fileLabel.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2 text-primary-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg><span>${fileName}</span>`;
        }
    });
</script>
{% endblock %}